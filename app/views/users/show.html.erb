<div class="row">
  <div class="col-md-3">
    <div class="panel panel-default">
      <div class="panel-body text-center">
        <div class="row">
          <div class="col-md-12">
            <h3><%= @user.name %></h3>

            <% if current_user == @user %>
              <hr>
              <%= link_to 'Edit Profile', edit_user_path(@user), class: 'btn btn-link' %>
            <% else %>
              <hr>
              <% if relationship = current_user&.active_relationships.find_by(followed_id: @user.id) %>
                <%= link_to 'Unfollow', relationship_path(relationship, return_to: request.fullpath), method: :delete, class: 'btn btn-default btn-block' %>
              <% else %>
                <%= link_to 'Follow', relationships_path(return_to: request.fullpath, relationship: { followed_id: @user.id }), method: :post, class: 'btn btn-primary btn-block' %>
              <% end %>
            <% end %>
          </div>
        </div>

        <br>

        <div class="row text-center">
          <div class="col-md-6">
            <p>    
              <b>Follower</b><br>
              <%= @user.follower_count %>
            </p>
          </div>
          <div class="col-md-6">
            <p>
              <b>Following</b><br>
              <%= @user.followed_count %>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-9">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title">
          Messages
        </h3>
      </div>

      <% unless @messages.present? %>
        <div class="panel-body">
          No messages yet.
        </div>
      <% end %>

      <ul class="list-group">
        <% @messages.each do |message| %>
          <li class="list-group-item">
            <p><%= link_to message.content, message_path(message) %></p>

            <p>Likes <%= message.likes_count %><br></p>
            <small>
              <%= time_tag message.created_at %>
            </small>
          </li>
        <% end %>
      </ul>
    </div>
  </div>
</div>
